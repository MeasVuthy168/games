:root{
  --blue:#0d2d5c;
  --wood1:#a57a54;
  --wood2:#d3a574;
  --cell-a:#e7cfa6;
  --cell-b:#b88f5a;
  --hi:#84caff;
  --legal:#93e79e;
  --danger:#ff9ba2;
  --ink:#1b1f23;
  --panel:#ffffff;
  --shadow: 0 8px 24px rgba(0,0,0,.12);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans Khmer", Arial, sans-serif;
  color:var(--ink);
  background:#f5f6f7;
}

/* Top bar */
.topbar{
  position:sticky;top:0;z-index:10;
  background:var(--blue); color:#fff;
  display:flex; align-items:center; gap:.5rem;
  padding:.75rem 1rem;
}
.topbar h1{font-size:1.1rem; margin:0}
.icon-btn{
  background:#fff; color:var(--blue); border:none; border-radius:.75rem;
  padding:.4rem .7rem; font-weight:600; cursor:pointer;
}
.icon-btn:active{transform:translateY(1px)}
.topbar .spacer{flex:1}

/* Layout */
.layout{
  display:grid;
  grid-template-columns: 1fr 320px;
  gap:1rem;
  padding:1rem;
}
.panel{
  background:var(--panel); border-radius:1rem; box-shadow:var(--shadow);
  padding:1rem;
}
.board-panel{display:flex; flex-direction:column; align-items:center; gap:1rem}

/* Wood board container */
.board{
  width:min(90vw, 520px);
  aspect-ratio:1/1;
  border-radius:.75rem; overflow:hidden;
  background:
    radial-gradient(120% 80% at 20% 10%, rgba(255,255,255,.2), transparent 40%),
    linear-gradient(45deg, rgba(255,255,255,.08), transparent 60%),
    repeating-linear-gradient(90deg, var(--wood1), var(--wood1) 12px, var(--wood2) 12px, var(--wood2) 24px);
  display:grid;
  grid-template-columns: repeat(8, 1fr);
  grid-template-rows: repeat(8, 1fr);
  box-shadow: inset 0 0 0 2px rgba(0,0,0,.1);
}

/* Cells */
.cell{
  position:relative;
  display:flex; align-items:center; justify-content:center;
  font-weight:700; user-select:none; -webkit-user-select:none;
}
.cell.dark{ background-color: var(--cell-b); }
.cell.light{ background-color: var(--cell-a); }

/* Coordinates (small) */
.cell::after{
  content: attr(data-ax);
  position:absolute; bottom:4px; right:6px;
  font-size:.62rem; opacity:.55;
}

/* Piece */
.piece{
  width:86%; height:86%; border-radius:.4rem;
  display:flex; align-items:center; justify-content:center;
  font-size: clamp(16px, 9vw, 38px);
  line-height:1; text-align:center;
  background:rgba(255,255,255,.0);
  cursor:grab; touch-action:none;
  transition: transform .08s ease;
}
.piece:active{transform:scale(.98)}

/* Placeholders (text now; replace by PNG later via background-image) */
.piece.white{color:#111}
.piece.black{color:#111}

/* Hints */
.cell.hint-move::before{
  content:""; position:absolute; width:24%; height:24%;
  background:var(--legal); border-radius:50%; opacity:.8;
}
.cell.hint-capture{ outline: 3px solid var(--danger); }

/* Selection */
.cell.selected{ outline: 3px solid var(--hi); z-index:1; }

/* Controls */
.controls{display:flex; align-items:center; gap:.5rem; flex-wrap:wrap}
.primary, .secondary{
  padding:.55rem .8rem; border-radius:.6rem; border:none; cursor:pointer; font-weight:600;
}
.primary{ background:var(--blue); color:#fff}
.secondary{ background:#e7edf6;}
.turn{margin-left:auto; font-weight:600}

/* Move list */
.side-panel h2{margin:.2rem 0 .5rem 0; font-size:1rem}
.moves{margin:0; padding-left:1.2rem; max-height:320px; overflow:auto}
.opt{display:flex; align-items:center; gap:.5rem; margin:.4rem 0}
.note{
  background:#f3f7ff; border-left:4px solid var(--blue);
  padding:.6rem .8rem; border-radius:.4rem; margin-top:1rem; font-size:.92rem;
}

/* Bottom bar */
.bottombar{
  position:sticky; bottom:0; background:#fff; border-top:1px solid #e5e7eb;
  padding:.6rem 1rem; display:flex; align-items:center; justify-content:space-between;
}
.home-link{text-decoration:none; font-weight:700}

/* Responsive */
@media (max-width: 920px){
  .layout{ grid-template-columns: 1fr; }
  .side-panel{ order:2 }
}
